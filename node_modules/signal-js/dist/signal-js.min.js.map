{"version":3,"file":"signal-js.min.js","mappings":"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","sources":["webpack://signal/webpack/universalModuleDefinition","webpack://signal/webpack/bootstrap","webpack://signal/webpack/runtime/define property getters","webpack://signal/webpack/runtime/hasOwnProperty shorthand","webpack://signal/webpack/runtime/make namespace object","webpack://signal/./src/key.js","webpack://signal/./src/SignalError.js","webpack://signal/./src/caller.js","webpack://signal/./src/utils.js","webpack://signal/./src/Signal.js","webpack://signal/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"signal\"] = factory();\n\telse\n\t\troot[\"signal\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default Symbol('events');","import key from './key';\nimport { single, multiple } from './caller';\n\nclass SignalError extends Error {}\n\nexport default function SignalErrorFactory(method, message) {\n\treturn new SignalError(`.${method}: ${message}`);\n};","export const multiple = (fns, args) => {\n\tfor (const fn of fns) fn(...args);\n};\n\nexport const single = (fns, arg) => {\n\tfor (const fn of fns) fn(arg);\n};","export const isFunction = value => typeof value === 'function';\n\nexport const isString = value => typeof value === 'string';\n\nexport const isSymbol = value => typeof value === 'symbol';","import key from './key';\nimport SignalError from './SignalError';\nimport { single, multiple } from './caller';\nimport {\n\tisFunction,\n\tisString,\n\tisSymbol,\n} from './utils';\n\nconst isValidKey = value => value != null && isString(value) || Number.isFinite(value) || isSymbol(value);\n\nconst proto = Object.assign(Object.create(null), {\n\t// on | off ************************************************\n\ton(name, fn) {\n\t\tif (!isValidKey(name)) throw SignalError('on', 'requires event name');\n\t\tif (!isFunction(fn)) throw SignalError('on', 'requires callback');\n\n\t\tconst location = this[key];\n\t\tconst fns = location.has(name) ? location.get(name) : location.set(name, new Set()).get(name);\n\t\tfns.add(fn);\n\t\t\n\t\treturn this;\n\t},\n\n\toff(name, fn) {\n\t\tif (!isValidKey(name)) throw SignalError('off', 'requires event name');\n\n\t\tconst location = this[key];  \n\n\t\tif (!location.has(name)) return this;\n\n\t\t// remove single\n\t\tif (fn) {\n\t\t\tconst fns = location.get(name);\n\t\t\t\n\t\t\t// remove this function\n\t\t\tfns.has(fn) && fns.delete(fn);\n\n\t\t\t// check size and delete location if empty\n\t\t\tfns.size === 0 && location.delete(name);\n\t\t\treturn this;\n\t\t}\n\n\t\t// remove all\n\t\tlocation.delete(name);\n\t\treturn this;\n\t},\n\n\tonce(name, fn) {\n\t\tif (!isValidKey(name)) throw SignalError('once', 'requires an event name');\n\t\tif (!isFunction(fn)) throw SignalError('once', 'requires a function');\n\n\t\t// slow path the params...this is for flexibility\n\t\t// and since these are single calls, the depotimization\n\t\t// shouldn't be a concern\n\t\tconst callback = (...parms) => {\n\t\t\tthis.off(name, callback);\n\t\t\tfn(...parms);\n\t\t};\n\n\t\treturn this.on(name, callback);\n\t},\n\n\t// emit ************************************************\n\temit(name, arg) {\n\t\tif (!isValidKey(name)) throw SignalError('emit', 'requires an event name');\n\n\t\tconst location = this[key];\n\n\t\t// nothing at the location\n\t\tif (!location.has(name)) return this;\n\n\t\tconst fns = location.get(name);\n\n\t\t// no events at the location\n\t\tif (!fns.size) return this;\n\n\t\t// we have an array of functions to call\n\t\tconst args = arguments;\n\t\tconst numOfArgs = args.length;\n\t\t\n\t\t// fast path\n\t\tif (numOfArgs <= 2) {\n\t\t\tsingle(fns, arg);\n\t\t\treturn this;\n\t\t}\n\n\t\t// prevent this function from being de-optimized\n\t\t// because of using the arguments:\n\t\t// http://reefpoints.dockyard.com/2014/09/22/javascript-performance-for-the-win.html\n\t\t// We only need the arguments after the event name\n\t\tlet idx = 1;\n\t\tconst argsArray = new Array(numOfArgs - 1);\n\t\tfor (; idx < numOfArgs; idx += 1) {\n\t\t\targsArray[idx - 1] = args[idx];\n\t\t}\n\n\t\tmultiple(fns, argsArray);\n\t\treturn this;\n\t},\n\n\t// listeners / names ************************************************\n\tlisteners(name) {\n\t\tconst location = this[key];\n\n\t\t// make sure to always send an array and clean any \n\t\t// references so that we cant mutate to undefined behavior\n\t\t\n\t\tif (name !== undefined) {\n\t\t\treturn location.has(name) ? \n\t\t\t\tArray.from(location.get(name)) : \n\t\t\t\t[];\n\t\t}\n\n\t\treturn Array.from(location.values())\n\t\t\t\t.map(set => Array.from(set))\n\t\t\t\t.flat();\n\t},\n\t\n\tnames() {\n\t\tconst location = this[key];\n\t\treturn Array.from(location.keys());\n\t},\n\n\tsize(name) {\n\t\tconst location = this[key];\n\n\t\t// make sure to always send an array and clean any \n\t\t// references so that we cant mutate to undefined behavior\n\t\t\n\t\tif (isValidKey(name)) {\n\t\t\treturn location.has(name) ? \n\t\t\t\tlocation.get(name).size : \n\t\t\t\t0;\n\t\t}\n\n\t\treturn Array.from(location.values())\n\t\t\t.reduce((memo, set) => memo + set.size, 0);\n\t},\n\n\t// clear ************************************************\n\tclear(name) {\n\t\tconst location = this[key];\n\n\t\tif (isValidKey(name)) {\n\t\t\tlocation.has(name) && location.get(name).clear();\n\t\t\treturn this;\n\t\t}\n\n\t\tthis[key].clear();\n\t\treturn this;\n\t},\n});\n\n// proxy methods\nproto.addListener = proto.subscribe = proto.bind = proto.on;\nproto.removeListender = proto.unsubscribe = proto.unbind = proto.off;\nproto.trigger = proto.dispatch = proto.emit;\n\nexport default proto;","import Signal from './Signal';\nimport key from './key';\n\nconst create = function() {\n\tconst signal = function signal() {\n\t\treturn create();\n\t};\n\tsignal[key] = new Map();\n\tsignal.__proto__ = Signal;\n\treturn signal;\n};\n\n// create a pub/sub to expose a signal singleton\nconst signal = create();\n\n// expose\nexport default signal;"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","SignalError","Error","SignalErrorFactory","method","message","isFunction","isValidKey","isString","Number","isFinite","isSymbol","proto","assign","create","on","name","fn","location","this","has","set","Set","add","off","fns","delete","size","once","callback","parms","emit","arg","args","arguments","numOfArgs","length","single","idx","argsArray","Array","multiple","listeners","undefined","from","values","map","flat","names","keys","reduce","memo","clear","addListener","subscribe","bind","removeListender","unsubscribe","unbind","trigger","dispatch","signal","Map","__proto__","Signal"],"sourceRoot":""}